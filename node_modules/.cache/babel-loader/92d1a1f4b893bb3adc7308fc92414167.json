{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"E:\\\\Bootcamp\\\\Node.js\\\\173\\\\Node\\\\SuproApp\\\\Deploy\\\\Frontend\\\\web\\\\src\\\\component\\\\account\\\\login.js\";\nimport React, { Component } from 'react';\nimport userapi from '../../handler/user';\nimport appconfig from '../../config/app.config.json';\nimport log4javascript from 'log4javascript';\nvar styles = {\n  container: {\n    width: \"100%\",\n    height: \"200px\",\n    margin: \"40px\"\n  },\n  input: {}\n};\n\nvar login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(login, _Component);\n\n  function login(props) {\n    var _this;\n\n    _classCallCheck(this, login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(login).call(this, props));\n    _this.state = {\n      formdata: {\n        username: '',\n        password: ''\n      },\n      isRequest: false,\n      errorMsg: \"\"\n    };\n    _this.onSignIn = _this.onSignIn.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.textChanged = _this.textChanged.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.createError = _this.createError.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getErrorMessage = _this.getErrorMessage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(login, [{\n    key: \"textChanged\",\n    value: function textChanged(e) {\n      var tmp = this.state.formdata;\n      tmp[e.target.name] = e.target.value;\n      this.setState({\n        formdata: tmp\n      });\n    }\n  }, {\n    key: \"onSignIn\",\n    value: function () {\n      var _onSignIn = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setState({\n                  isRequest: true\n                });\n                console.log(\"username : \" + this.state.formdata.username + \", password : \" + this.state.formdata.password);\n                _context.next = 4;\n                return userapi.LoginHandler(this.state.formdata.username, this.state.formdata.password);\n\n              case 4:\n                result = _context.sent;\n\n                if (result.status === 200) {\n                  console.log('Login.js Debugger');\n                  localStorage.setItem(appconfig.secure_key.userdata, JSON.stringify(result.message.userdata));\n                  localStorage.setItem(appconfig.secure_key.token, result.message.token);\n                  console.log(\"userdata from secure_key : \" + localStorage.getItem(appconfig.secure_key.userdata));\n                  console.log(\"token from secure_key : \" + localStorage.getItem(appconfig.secure_key.token));\n                  this.props.history.push('/dashboard');\n                } else {\n                  console.log(result.message);\n                }\n\n                this.setState({\n                  isRequest: false\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function onSignIn() {\n        return _onSignIn.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // in debug mode replace line 4 with line 3.\n      // window.myLogger = log4javascript.getDefaultLogger();\n      window.myLogger = log4javascript.getLogger();\n      var ajaxAppender = new log4javascript.AjaxAppender('/api/logger');\n      ajaxAppender.setBatchSize(10);\n      ajaxAppender.setSendAllOnUnload();\n      window.myLogger.addAppender(ajaxAppender); //report all user console errors\n\n      window.onerror = function (message, url, lineNumber) {\n        var errorMsg = \"Console error- \" + url + \" : \" + lineNumber + \": \" + message;\n        window.myLogger.error(errorMsg);\n        return true;\n      };\n    }\n  }, {\n    key: \"createError\",\n    value: function createError(type) {\n      if (type == \"error\") {\n        window.myLogger.error(this.state.errorMsg);\n      } else {\n        window.myLogger.info(this.state.errorMsg);\n      }\n    }\n  }, {\n    key: \"getErrorMessage\",\n    value: function getErrorMessage(text) {\n      this.setState({\n        errorMsg: text\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"login-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-box-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"login-box-msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Sign in to start your session on SuPro APP\"), React.createElement(\"form\", {\n        method: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group has-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control\",\n        type: \"username\",\n        name: \"username\",\n        id: \"username\",\n        placeholder: \"masukkan username\",\n        required: \"\",\n        value: this.state.username,\n        onChange: this.textChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-envelope form-control-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group has-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control\",\n        type: \"password\",\n        name: \"password\",\n        id: \"password\",\n        placeholder: \"masukkan password\",\n        required: \"\",\n        value: this.state.password,\n        onChange: this.textChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-lock form-control-feedback\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"My React Application\"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"labe\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Enter Your log message:\"), React.createElement(\"input\", {\n        type: \"text\",\n        style: styles.input,\n        onChange: function onChange(e) {\n          return _this2.getErrorMessage(e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          margin: \"10px 0\"\n        },\n        onClick: function onClick(e) {\n          return _this2.createError(\"error\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \" Send as Error \"), React.createElement(\"button\", {\n        style: {\n          margin: \"10px\"\n        },\n        onClick: function onClick(e) {\n          return _this2.createError(\"info\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \" Send as Info \"), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-xs-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        disabled: this.state.isRequest,\n        type: \"button\",\n        onClick: this.onSignIn,\n        className: \"btn btn-primary btn-block btn-flat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Sign In\"))))));\n    }\n  }]);\n\n  return login;\n}(Component);\n\nexport default login;","map":{"version":3,"sources":["E:\\Bootcamp\\Node.js\\173\\Node\\SuproApp\\Deploy\\Frontend\\web\\src\\component\\account\\login.js"],"names":["React","Component","userapi","appconfig","log4javascript","styles","container","width","height","margin","input","login","props","state","formdata","username","password","isRequest","errorMsg","onSignIn","bind","textChanged","createError","getErrorMessage","e","tmp","target","name","value","setState","console","log","LoginHandler","result","status","localStorage","setItem","secure_key","userdata","JSON","stringify","message","token","getItem","history","push","window","myLogger","getLogger","ajaxAppender","AjaxAppender","setBatchSize","setSendAllOnUnload","addAppender","onerror","url","lineNumber","error","type","info","text"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport userapi from '../../handler/user';\r\nimport appconfig from '../../config/app.config.json';\r\nimport log4javascript from 'log4javascript';\r\n\r\nconst styles = {\r\n\tcontainer:{\r\n\t\twidth:\"100%\",\r\n\t\theight:\"200px\",\r\n\t\tmargin:\"40px\"\r\n\t},\r\n\tinput:{\r\n\r\n\t},\r\n}\r\n\r\nclass login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      formdata: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      isRequest: false,\r\n      errorMsg:\"\"\r\n    };\r\n\r\n    this.onSignIn = this.onSignIn.bind(this);\r\n    this.textChanged = this.textChanged.bind(this);\r\n    this.createError = this.createError.bind(this);\r\n    this.getErrorMessage = this.getErrorMessage.bind(this);\r\n  }\r\n\r\n  textChanged(e) {\r\n      let tmp = this.state.formdata;\r\n      tmp[e.target.name] = e.target.value;\r\n      this.setState({\r\n          formdata: tmp\r\n      });\r\n  }\r\n\r\n  async onSignIn() {\r\n    this.setState({\r\n      isRequest: true\r\n    });\r\n\r\n    console.log(\"username : \" + this.state.formdata.username + \", password : \" + this.state.formdata.password);\r\n    \r\n    let result = await userapi.LoginHandler(this.state.formdata.username, this.state.formdata.password);\r\n\r\n    if(result.status === 200)\r\n    {\r\n      console.log('Login.js Debugger');\r\n\r\n      localStorage.setItem(appconfig.secure_key.userdata, JSON.stringify(result.message.userdata));\r\n      localStorage.setItem(appconfig.secure_key.token, result.message.token);\r\n\r\n      console.log(\"userdata from secure_key : \" + localStorage.getItem(appconfig.secure_key.userdata));\r\n      console.log(\"token from secure_key : \" + localStorage.getItem(appconfig.secure_key.token));\r\n\r\n      this.props.history.push('/dashboard');\r\n    }\r\n    else\r\n    {\r\n      console.log(result.message);\r\n    }\r\n\r\n    this.setState({\r\n      isRequest: false\r\n    });\r\n  }\r\n\r\n  componentDidMount(){\r\n\r\n    // in debug mode replace line 4 with line 3.\r\n    // window.myLogger = log4javascript.getDefaultLogger();\r\n    window.myLogger = log4javascript.getLogger();\r\n    var ajaxAppender = new log4javascript.AjaxAppender('/api/logger');\r\n    ajaxAppender.setBatchSize(10);\r\n    ajaxAppender.setSendAllOnUnload();\r\n    window.myLogger.addAppender(ajaxAppender);\r\n\r\n    //report all user console errors\r\n    window.onerror = function(message, url, lineNumber) {\r\n      var errorMsg = \"Console error- \"+url+\" : \"+lineNumber + \": \"+ message;\r\n      window.myLogger.error(errorMsg);\r\n      return true;\r\n    };\r\n  }\r\n\r\n  createError(type){\r\n\t\tif(type == \"error\"){\r\n\t\t\t\twindow.myLogger.error(this.state.errorMsg);\r\n\t\t}else{\r\n\t\t\twindow.myLogger.info(this.state.errorMsg);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetErrorMessage(text){ this.setState({errorMsg:text})\t}\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login-box\">\r\n        <div className=\"login-box-body\">\r\n              <p className=\"login-box-msg\">Sign in to start your session on SuPro APP</p>\r\n              <form method=\"post\">\r\n                  <div className=\"form-group has-feedback\">\r\n                    <input className=\"form-control\"\r\n                      type=\"username\"\r\n                      name=\"username\"\r\n                      id=\"username\"\r\n                      placeholder=\"masukkan username\"\r\n                      required=\"\"\r\n                      value={this.state.username} \r\n                      onChange={this.textChanged} />\r\n                    <span className=\"glyphicon glyphicon-envelope form-control-feedback\"></span>\r\n                  </div>\r\n                  <div className=\"form-group has-feedback\">\r\n                    <input \r\n                      className=\"form-control\"\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      id=\"password\"\r\n                      placeholder=\"masukkan password\"\r\n                      required=\"\" \r\n                      value={this.state.password} \r\n                      onChange={this.textChanged}\r\n                    />\r\n                    <span className=\"glyphicon glyphicon-lock form-control-feedback\"></span>\r\n                  </div>\r\n                  <h2>My React Application</h2> <br/>\r\n                  <labe>Enter Your log message:</labe>\r\n                  <input type=\"text\" style = {styles.input} onChange = {e => this.getErrorMessage(e.target.value)}/>\r\n                  <br/> <br/>\r\n                  <button style = {{margin:\"10px 0\"}} onClick={e => this.createError(\"error\")}> Send as Error </button>\r\n                  <button style = {{margin:\"10px\"}} onClick={e => this.createError(\"info\")}> Send as Info </button>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-xs-4\">\r\n                      <button disabled={this.state.isRequest} type=\"button\" onClick={this.onSignIn} className=\"btn btn-primary btn-block btn-flat\">Sign In</button>\r\n                    </div>\r\n                  </div>\r\n              </form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default login;"]},"metadata":{},"sourceType":"module"}